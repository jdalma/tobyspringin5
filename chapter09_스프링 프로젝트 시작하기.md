
```
스프링은 매우 유연하게 설계된 범용 프레임워크이기 때문에 아키텍처의 종류나 프러젝트를 구성하는 방법에 대한 자유도가 매우 높다.
아무렇게나 가져다 쓰면 스프링이 주는 유익을 제대로 얻지 못할 수도 있기 때문이다.
```

# **9.1 자바 엔터프라이즈 플랫폼과 스프링 애플리케이션**

스프링은 주로 자바 엔터프라이즈 환경에서 동작하는 애플리케이션을 개발하는 목적으로 사용된다.  

## 클라이언트와 백엔드 시스템

엔터프라이즈 애플리케이션은 자신이 클라이언트가 돼서 또 다른 엔터프라이즈 시스템에 서비스를 요청할 수도 있다.  
자바 서버가 받아들일 수 있는 방식으로 요청을 보내기만 한다면 어떤 종류의 클라이언트이든 상관없다.  

## 애플리케이션 서버

스프링으로 만든 애플리케이션을 자바 서버환경에 배포하려면 `JavaEE`서버가 필요하다.  
`JavaEE`표준을 따르는 애플리케이션 서버는 크게 두 가지로 구분할 수 있다.  
1. `JavaEE`의 대부분의 표준 기술을 지원하고 다양한 형태의 모듈로 배포가 가능한 완전환 **웹 어플리케이션 서버 `WAS`**
2. 웹 모듈의 배포만 가능한 `경량급 WAS` 또는 `서블릿/JSP 컨테이너`

**경량급 WAS/서블릿 컨테이너**
- 스프링은 기본적으로 `Tomcat`이나 `Jetty`같은 가벼운 서블릿 컨테이너만 있어도 충분하다.

**WAS**
- WAS는 상대적으로 관리 기능이나 모니터링 기능이 뛰어나서 여러 대의 서버를 동시에 운영할 때 유리한 점이 많다.

실제로 개발환경과 운영환경에서 가장 많이 사용되는 자바 서버는 웹 모듈만 지원하는 **서블릿 컨테이너인 `아파치 톰캣`**이다.  
스프링소스 회사에는 아파치 프로젝트인 HTTPD서버와 톰캣의 핵심 개발자들이 포진해 있다.  
톰캣을 기반으로 엔터프라이즈 스프링 애플리케이션에 최적화된 경량급 애플리케이션 서버인 `tcServer`를 개발했다.  

## 스프링 애플리케이션의 배포 단위

1. **독립 웹 모듈**
   - 스프링은 보통 `war`로 패키징된 독립 웹 모듈로 배포된다.
   - 톰캣 같은 서블릿 컨테이너를 쓴다면 독립 웹 모듈이 유일한 방법이다.
   - WAS로 배포한다고 하더라도 독립 웹 모듈을 사용하는 경우가 대부분일 것이다.
   - 여러 개의 웹 모듈을 묶어서 하나의 웹 애플리케이션 모듈로 만들지 않는 한 **독립 웹 모듈이 가장 단순하고 편리한 배포 단위다.**
2. **엔터프라이즈 애플리케이션**
   - 확장자가 `ear`인 엔터프라이즈 애플리케이션으로 패키징해서 배포할 수도 있다.
   - **하나 이상의 웹 모듈과 별도로 분리된 공유 가능한 스프링 컨텍스트를 엔터프라이즈 애플리케이션으로 묶어주는 방법이다.**
3. **백그라운드 서비스 모듈**
   - 이 두 가지 방법 외에도 `J2EE 1.4`에서 등장한 `rar`패키징 방법도 있다.
   - 리소스 커넥터를 만들어 배포할 때 사용하는 방식
   - 만약 스프링 애플리케이션이 UI를 가질 필요는 없고 서버 내에서 백그라운드 서비스처럼 동작할 필요가 있다면 `rar`모듈로 만들어서 배포할 수 있다.

# **9.2 개발도구와 환경**

## JavaSE 와 JavaEE

- **Java SE (Standard Edition)**
  - 가장 대중적인 자바 플랫폼
  - 흔히 자바 언어라고하는 대부분의 패키지가 포함된 에디션
  - Java SE의 API는 자바 프로그래밍 언어의 핵심기능들을 제공
- **Java EE (Enterprise Edition)**
  - Java EE 플랫폼은 Java SE 플랫폼을 기반으로 그 위에 탑재된다.
  - 웹 프로그래밍에 필요한 기능을 다수 포함

## 재패키징

스프링이 사용하는 라이브러리 의존관계를 따져보면 버전이 다르면서 같은 라이브러리를 사용하는 경우가 여럿 발견된다.  
특히 **[ASM](https://asm.ow2.io/)** 은 워낙 많은 곳에서 사용되면서 서로 버전이 호환이 안되는 경우가 많아 자주 문제를 일으키는 악명 높은 라이브러리다.  
그래서 **스프링은 ASM 라이브러리를 통째로 재패키징해서 `org.springframework.asm`이라는 스프링 패키지 밑으로 클래스를 옮겨두고 이를 사용한다.**  

## 빌드 툴과 라이브러리 관리

`Maven`과 `ANT`는 자바의 대표적이고 독립적인 빌드 툴이다.
`Maven`은 단순 빌드 툴을 넘어서 개발 과정에서 필요한
1. 빌드
2. 테스트
3. 배치
4. 문서화
5. 리포팅

등의 다양한 작업을 지원하는 **종합 프로젝트 관리 툴**의 성격을 띠고 있다.  
`Maven`은 **POM**이라고 불리는 **프로젝트 모델 정보**를 사용하는 것이 특징이다.  
그래서 절차적인 스크립트와 구조과 비슷한 `ANT`와 달리 `Maven`은 **선언적**이다.  

프로젝트의 주요한 구조와 특징, 필요한 정보를 POM의 프로젝트 모델 정보로 만들어두면,  
이를 참조해서 미리 정해진 절차에 따라 빌드 또는 프로젝트 관리 작업을 진행할 수 있다.  

`Maven`의 의존 라이브러리 관리 기능이 제공하는 더 흥미로운 기능은 **전이적 의존 라이브러리 추적 기능**이다.  
지정된 라이브러리가 동작하는데 필요한 여타 라이브러리까지 함께 다운로드 해주는 기능이다.  
